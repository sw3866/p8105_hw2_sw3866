Homework 2
================
Siyan Wen
2023-09-27

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)
```

## Problem 1

First, clean the data in pols-month.csv.

``` r
pols_month_df= read_csv(file="data/pols-month.csv")|> 
  janitor::clean_names()|>
  separate(mon,into=c("year", "month","day"),sep='-') |>     #separate by"-"
  mutate(month = month.abb[as.numeric(month)]) |>     #replace month with name
  mutate(
    prez_dem=case_match(prez_dem,
      1 ~ "dem",
      0 ~ "gop"
        ))|>
  rename(president=prez_dem)|>
  select(year,month,president,gov_gop,sen_gop,rep_gop,gov_dem,sen_dem,rep_dem)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Second, clean the data in snp.csv.

``` r
snp_df= read_csv(file="data/snp.csv")|>
  janitor::clean_names()|>
  separate(date,into=c("month", "day","year"),sep='/')
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Problem 2

Read and clean the Mr. Trash Wheel sheet:

``` r
mr.trashwheel_df=
  readxl::read_excel("data/trash_wheel.xlsx",sheet = 1, range ="A2:N549")|>
  janitor::clean_names()|>
  mutate(homes_powered=(weight_tons*500)/30)|>
  mutate(trash_wheel_name="Mr.Trash Wheel")

mr.trashwheel_df$year = as.numeric(as.character(mr.trashwheel_df$year))
```

Read and clean the Professor Trash Wheel sheet:

``` r
professor.trashwheel_df=
  readxl::read_excel("data/trash_wheel.xlsx",sheet = 2 , range ="A2:M96")|>
  janitor::clean_names()|>
  mutate(homes_powered=(weight_tons*500)/30)|>
  mutate(trash_wheel_name="Professor Trash Wheel")
```

Read and clean the Gwynnda Trash Wheel sheet:

``` r
gwynnda.trashwheel_df=
  readxl::read_excel("data/trash_wheel.xlsx",sheet = 4, range ="A2:K108")|>
  janitor::clean_names()|>
  mutate(homes_powered=(weight_tons*500)/30)|>
  mutate(trash_wheel_name="Gwynnda Trash Wheel")
```

Combine three datasets and clean:

``` r
trashwheel_df=
  bind_rows(mr.trashwheel_df,professor.trashwheel_df,gwynnda.trashwheel_df)|>
  janitor::clean_names()|>
  relocate(homes_powered,.before = plastic_bottles)|>
  relocate(trash_wheel_name)

trashwheel_df[is.na(trashwheel_df)] <- 0
```

In total, the resulting dataset contains $747$ observations. The number
of the total observation is the sum of number of the observation in the
all three datasets ( $747=106+547+94$).

Additional, the resulting dataset contains $16$ variables such as the
trash wheel name, the dumpster number, date, the weight of trash, the
homes powered estimation and so on. From the dataset, we can tell that:
in 2017/01/02, Professor Trash Wheel’s dumpster number 1 has collected
$1.79$ tons of trash, and these trash can be convert into electricity
that can be used to support $29.83333$ household.

For available data, the total weight of trash collected by Professor
Trash Wheel was 190.12 tons. The total number of cigarette butts
collected by Gwynnda in July of 2021 is 1.63^{4}

``` r
y=sum(professor.trashwheel_df$weight_tons)

x=filter(gwynnda.trashwheel_df,month=='July',year==2021)
totalnumber_G_July2021=sum(x$cigarette_butts)
```

## Problem 3
